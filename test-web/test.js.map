{"version":3,"sources":["webpack:///webpack/bootstrap 87e057ccc98c939d916a","webpack:///./test-web/test.ts","webpack:///./src/index.ts","webpack:///./src/knowledge-problems.ts","webpack:///./src/knowledge-analysis.ts","webpack:///./src/utils.ts","webpack:///./src/problems/spelling.ts","webpack:///./test-web/ajax.ts","webpack:///./test-web/unixode-loader.ts"],"names":[],"mappings":"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","file":"./test-web/test.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 87e057ccc98c939d916a","import { KnowledgeDomain, KnowledgeState, calculatePriority, createComponentsFromProblems } from './../src/';\r\nimport { createSpellingProblem } from './../src/problems/spelling';\r\nimport { Ajax } from './ajax';\r\nimport { loadUnixode } from './unixode-loader';\r\n\r\nlet domain: KnowledgeDomain = null;\r\nlet state: KnowledgeState = null;\r\nlet host: HTMLDivElement = null;\r\n\r\n(window as any)['__debug'] = () => ({\r\n    domain, state, host,\r\n    getProblems: (key: string) => {\r\n        return domain.problems.filter(x => x.key.toUpperCase() === key.toUpperCase())\r\n            .map(x => ({ ...x, componentsObjects: x.components.map(c => domain.components[c]) }));\r\n    }\r\n});\r\n\r\nfunction setup() {\r\n    let input = document.createElement('input') as HTMLInputElement;\r\n    document.body.appendChild(input);\r\n    input.type = 'text';\r\n    input.onchange = () => addProblem(input.value);\r\n\r\n    host = document.createElement('div');\r\n    document.body.appendChild(host);\r\n\r\n    let ajax = new Ajax();\r\n    ajax.get('/Words_UniXode_Kids.txt', r => {\r\n        setTimeout(() => {\r\n            // ajax.get('/Words_UniXode.txt', r => {\r\n            let result = loadUnixode(r);\r\n            let words = result.words.map(x => x.pairs.map(x2 => ({ letters: x2.english, sound: x2.xharish })));\r\n            let problems = words.map(x => createSpellingProblem(x));\r\n            let comps = createComponentsFromProblems(problems);\r\n\r\n            // let excComps = [] as any;\r\n            // for (let k in comps) {\r\n            //     if (Object.getOwnPropertyNames(comps[k].exclusives).length === 0) { continue; }\r\n            //     excComps.push(comps[k]);\r\n            // }\r\n            // console.log(excComps);\r\n\r\n            console.log(problems.filter(x => x.conflict > 0));\r\n\r\n            domain = { components: comps, problems: problems, hasCalculatedConflict: false, hasCalculatedOccurences: false };\r\n            state = {};\r\n            showPriority();\r\n        });\r\n    }, err => console.warn(err));\r\n}\r\n\r\nfunction showPriority() {\r\n    calculatePriority(domain, state);\r\n\r\n    let html = '';\r\n    let p = domain.problems.map(x => x);\r\n    p.sort((a, b) => b.userPriority - a.userPriority);\r\n    p.forEach(x => html += '<br>' + (`${x.key} ${Math.round(x.userPriority * 100) / 100} = ${Math.round(x.userValue * 100) / 100} / ${Math.round(x.userDifficulty * 100) / 100} / ${Math.round(x.conflict * 100) / 100}`));\r\n    host.innerHTML = html;\r\n}\r\n\r\nfunction addProblem(key: string) {\r\n    console.log('addProblem', key, state);\r\n    key = key.toUpperCase();\r\n\r\n    let p = domain.problems.filter(x => x.key === key);\r\n    p.sort((a, b) => b.userPriority - a.userPriority);\r\n\r\n    if (p[0]) {\r\n        p[0].components.forEach(x => {\r\n            let c = domain.components[x];\r\n            let s = state[x];\r\n            if (!s) { s = state[x] = { right: 0, wrong: 0, score: 0 }; }\r\n            s.right++;\r\n            s.score = s.score * 0.5 + 0.5;\r\n            if (s.score >= 0.75 && s.wrong === 0) { s.score = 1; }\r\n        });\r\n    }\r\n\r\n    showPriority();\r\n}\r\n\r\nsetup();\n\n\n// WEBPACK FOOTER //\n// ./test-web/test.ts","export * from './knowledge-state';\r\nexport * from './knowledge-problems';\r\nexport * from './knowledge-analysis';\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","import { KnowledgeProblem, KnowledgeComponents } from './knowledge-state';\r\nimport { calculateConflict } from './knowledge-analysis';\r\n\r\n\r\nexport function createRelationshipComponentName(a: string, b: string): string {\r\n\r\n    if (b < a) {\r\n        let c = a;\r\n        a = b;\r\n        b = c;\r\n    }\r\n\r\n    return a.replace(/~/g, '\\\\~') + '~' + b.replace(/~/g, '\\\\~');\r\n}\r\n\r\nexport function createComponentsFromProblems(problems: KnowledgeProblem[]): KnowledgeComponents {\r\n    let comps: KnowledgeComponents = {};\r\n\r\n    for (let p of problems) {\r\n        for (let c of p.components) {\r\n            if (!comps[c]) {\r\n                comps[c] = { name: c, occurences: 0, exclusives: {}, conflict: 0 };\r\n            }\r\n        }\r\n\r\n        for (let exclusive of p.exclusives) {\r\n\r\n            let exc = {} as any;\r\n            for (let item of exclusive.items) {\r\n                if (exc[item]) { continue; }\r\n                exc[item] = true;\r\n                comps[item].exclusives[exclusive.type] = comps[item].exclusives[exclusive.type] || {};\r\n                exclusive.items.filter(x => x !== item).forEach(x => comps[item].exclusives[exclusive.type][x] = comps[x]);\r\n            }\r\n        }\r\n    }\r\n\r\n    return comps;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/knowledge-problems.ts","import { KnowledgeDomain, KnowledgeState, KnowledgeComponent } from './knowledge-state';\r\nimport { calculateStats } from './stats';\r\nimport { forprops } from './utils';\r\n\r\nexport function calculateOccurences(domain: KnowledgeDomain) {\r\n    if (domain.hasCalculatedOccurences) { return; }\r\n    domain.hasCalculatedOccurences = true;\r\n    for (let p of domain.problems) {\r\n        for (let c of p.components) {\r\n            if (!domain.components[c]) { domain.components[c] = { name: c, occurences: 0, exclusives: {}, conflict: 0 }; }\r\n            domain.components[c].occurences++;\r\n        }\r\n    }\r\n}\r\n\r\nexport function calculateConflict(domain: KnowledgeDomain, ) {\r\n    if (domain.hasCalculatedConflict) { return; }\r\n    domain.hasCalculatedConflict = true;\r\n\r\n    calculateOccurences(domain);\r\n\r\n    // for (let k in domain.components) {\r\n    //     let c = domain.components[k];\r\n\r\n    //     let totalUniquenessDeviationRatios = 0;\r\n    //     let typeCount = 0;\r\n\r\n    //     for (let exk in c.exclusives) {\r\n    //         let ex = c.exclusives[exk];\r\n    //         let occurences = [];\r\n    //         for (let ok in ex) {\r\n    //             let o = ex[ok];\r\n    //             occurences.push(o.occurences);\r\n    //         }\r\n\r\n    //         if (occurences.length === 1) { continue; }\r\n\r\n    //         let stats = calculateStats(occurences);\r\n    //         totalUniquenessDeviationRatios += stats.stdDeviation / stats.range;\r\n    //         typeCount++;\r\n    //     }\r\n\r\n    //     c.conflict = typeCount === 0 ? 0 : 1 - totalUniquenessDeviationRatios / typeCount;\r\n\r\n    //     if (c.conflict <= 0 && typeCount > 0) {\r\n    //         let breakdance = true;\r\n    //     }\r\n    // }\r\n\r\n    for (let p of domain.problems) {\r\n        let compInsideRatios: number[] = [];\r\n        let ratiosDebug: { comp: KnowledgeComponent, ratio: number }[] = [];\r\n\r\n        for (let c of p.components) {\r\n            let comp = domain.components[c];\r\n            forprops(comp.exclusives, x => {\r\n                let othersInProblem: KnowledgeComponent[] = [];\r\n                let othersNotInProblem: KnowledgeComponent[] = [];\r\n                forprops(x, o => {\r\n                    let isInProblem = p.components.indexOf(o.name) >= 0;\r\n                    if (isInProblem) { othersInProblem.push(o); }\r\n                    else { othersNotInProblem.push(o); }\r\n                });\r\n\r\n                let inProblemOccurences = othersInProblem.reduce((out, o) => out += o.occurences, 0);\r\n                let outProblemOccurences = othersNotInProblem.reduce((out, o) => out += o.occurences, 0);\r\n\r\n                if (othersInProblem.length > 1) {\r\n                    let minInProblemOccurences = othersInProblem.reduce((out, o) => out < o.occurences ? out : o.occurences, 1000000000);\r\n                    compInsideRatios.push(Math.pow(minInProblemOccurences / (inProblemOccurences + outProblemOccurences), othersInProblem.length));\r\n                } else {\r\n                    compInsideRatios.push(inProblemOccurences / (inProblemOccurences + outProblemOccurences));\r\n                }\r\n\r\n                ratiosDebug.push({ comp: comp, exclusive: x, ratio: compInsideRatios[compInsideRatios.length - 1] } as any);\r\n            });\r\n        }\r\n\r\n        p.conflict = -Math.log(compInsideRatios.reduce((out, r) => out *= r, 1));\r\n    }\r\n}\r\n\r\n\r\nexport function calculateValue(domain: KnowledgeDomain, state: KnowledgeState) {\r\n    calculateOccurences(domain);\r\n\r\n    for (let p of domain.problems) {\r\n        let value = 0;\r\n        for (let c of p.components) {\r\n            let cScore = !state[c] ? 0 : state[c].score;\r\n            value += (1 - cScore) * Math.log(Math.E + domain.components[c].occurences);\r\n        }\r\n        p.userValue = value;\r\n    }\r\n}\r\n\r\nexport function calculateDifficulty(domain: KnowledgeDomain, state: KnowledgeState) {\r\n    calculateOccurences(domain);\r\n\r\n    for (let p of domain.problems) {\r\n        let inverseScores = 0;\r\n        for (let c of p.components) {\r\n            let cState = state[c];\r\n            let cScore = 0;\r\n            if (cState) {\r\n                cScore = state[c].score;\r\n            }\r\n\r\n            // Add Difficulty for rare items\r\n            let occurenceRatio = domain.components[c].occurences / domain.problems.length;\r\n\r\n            inverseScores += (1 - cScore) * (10 / (occurenceRatio + 1));\r\n        }\r\n        p.userDifficulty = (0.0001 + inverseScores) * Math.log(Math.E + p.components.length);\r\n    }\r\n}\r\n\r\nexport function calculatePriority(domain: KnowledgeDomain, state: KnowledgeState) {\r\n    calculateValue(domain, state);\r\n    calculateDifficulty(domain, state);\r\n    calculateConflict(domain);\r\n\r\n    for (let p of domain.problems) {\r\n        p.userPriority = p.userDifficulty === 0 ? 0 : Math.log(1 + (p.userValue / Math.pow((1 + p.userDifficulty), 1.5) / (0.01 + p.conflict)));\r\n    }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/knowledge-analysis.ts","export function forprops<T>(obj: { [key: string]: T }, callback: (t: T, k: string) => void) {\r\n    for (let k in obj) {\r\n        callback(obj[k], k);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils.ts","import { KnowledgeProblem, KnowledgeComponent } from './../knowledge-state';\r\nimport { createRelationshipComponentName } from './../knowledge-problems';\r\n\r\nexport interface LetterSoundPair {\r\n    letters: string;\r\n    sound: string;\r\n}\r\n\r\nexport function createSpellingProblem(wordPairs: LetterSoundPair[]): KnowledgeProblem {\r\n\r\n    let comps: string[] = [];\r\n    let exclusives: { type: string, items: string[] }[] = [];\r\n\r\n    let wordEnglish = wordPairs.map(x => x.letters).join('');\r\n    for (let pair of wordPairs) {\r\n\r\n        let letters = 'l:' + pair.letters;\r\n        let sound = 's:' + pair.sound;\r\n\r\n        comps.push(letters);\r\n        comps.push(sound);\r\n        exclusives.push({ type: 'letters_sound', items: [letters, sound] });\r\n        comps.push(createRelationshipComponentName(letters, sound));\r\n        comps.push(createRelationshipComponentName(letters, wordEnglish));\r\n        // exclusives.push({ type: 'wordLetters_sound', items: [comps[comps.length - 1], sound] });\r\n        comps.push(createRelationshipComponentName(sound, wordEnglish));\r\n\r\n        comps.push(createRelationshipComponentName(sound, '(hear)'));\r\n        pair.letters.split('').forEach(c => comps.push(createRelationshipComponentName('l:' + c, '(type)')));\r\n        if (pair.letters.length > 0) { pair.letters.split('').forEach(c => comps.push(createRelationshipComponentName('l:' + c, '(read)'))); }\r\n        comps.push(createRelationshipComponentName(letters, '(read)'));\r\n    }\r\n\r\n    let keys = {} as any;\r\n    comps = comps.filter(x => {\r\n        if (keys[x]) { return false; }\r\n        keys[x] = true;\r\n        return true;\r\n    });\r\n\r\n    return {\r\n        key: wordEnglish,\r\n        components: comps,\r\n        exclusives: exclusives,\r\n        conflict: 0\r\n    };\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/problems/spelling.ts","export interface XHR {\r\n    setRequestHeader(header: string, value: string): void;\r\n    getResponseHeader(header: string): string;\r\n}\r\n\r\nexport interface AjaxSettings {\r\n    url: string;\r\n    type: 'GET' | 'POST' | 'PUT' | 'DELETE' | 'HEAD';\r\n    data?: string;\r\n    beforeSend?(xhr: XHR): void;\r\n    success?(data: string, textStatus: string, xhr: XHR): void;\r\n    error?(xhr: XHR, textStatus: string, errorThrown: string): void;\r\n    complete?(): void;\r\n}\r\n\r\n// Vanilla Ajax Requests\r\n// From: http://stackoverflow.com/a/18078705/567524\r\n\r\nexport class Ajax {\r\n\r\n    private createXhr() {\r\n        if (typeof XMLHttpRequest !== 'undefined') {\r\n            return new XMLHttpRequest();\r\n        }\r\n        let versions = [\r\n            'MSXML2.XmlHttp.6.0',\r\n            'MSXML2.XmlHttp.5.0',\r\n            'MSXML2.XmlHttp.4.0',\r\n            'MSXML2.XmlHttp.3.0',\r\n            'MSXML2.XmlHttp.2.0',\r\n            'Microsoft.XmlHttp'\r\n        ];\r\n\r\n        for (let i = 0; i < versions.length; i++) {\r\n            try {\r\n                return new ActiveXObject(versions[i]);\r\n            } catch (e) {\r\n            }\r\n        }\r\n    }\r\n\r\n    get(url: string, onSuccess: (response: string) => void, onFail: (error: string) => void) {\r\n        this.ajax({\r\n            url: url,\r\n            type: 'GET',\r\n            success: onSuccess,\r\n            error: (xhr, errorStatus, information) => onFail(errorStatus + ':' + information)\r\n        });\r\n    };\r\n\r\n    ajax(settings: AjaxSettings) {\r\n        // settings.beforeSend\r\n        // settings.complete\r\n        // settings.contentType\r\n        // settings.data\r\n        // settings.dataType - No Processing Done Null or Text only\r\n        // settings.error\r\n        // settings.processData - Always false\r\n        // settings.success\r\n        // settings.type\r\n        // settings.url\r\n\r\n        settings.success = settings.success || (() => { });\r\n        settings.error = settings.error || (() => { });\r\n        settings.complete = settings.complete || (() => { });\r\n        settings.beforeSend = settings.beforeSend || (() => { });\r\n\r\n        let xhr = this.createXhr();\r\n\r\n        let hasCompleted = false;\r\n        setTimeout(() => {\r\n            if (!hasCompleted) {\r\n                settings.error(xhr, 'Timed Out', '');\r\n            }\r\n        }, 30 * 1000);\r\n\r\n        let url = settings.url;\r\n        let method = settings.type || 'GET';\r\n\r\n        xhr.open(method, url, true);\r\n        // xhr.withCredentials = true;\r\n\r\n        xhr.onerror = function (err: any) {\r\n            settings.error(xhr, '' + xhr.status, '' + err);\r\n        };\r\n\r\n        xhr.onreadystatechange = function () {\r\n            if (xhr.readyState === 4) {\r\n                hasCompleted = true;\r\n\r\n                if (xhr.status >= 200 && xhr.status < 300) {\r\n                    try {\r\n                        settings.success(xhr.responseText, '' + xhr.status, xhr);\r\n                    } catch (err) { console.log('ERROR in success handler', err); }\r\n                } else {\r\n                    try {\r\n                        settings.error(xhr, '' + xhr.status, '');\r\n                    } catch (err) { console.log('ERROR in error handler', err); }\r\n                }\r\n                try {\r\n                    settings.complete();\r\n                } catch (err) { console.log('ERROR in complete handler', err); }\r\n            }\r\n        };\r\n\r\n        settings.beforeSend(xhr);\r\n        xhr.send(settings.data);\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./test-web/ajax.ts","\r\nexport interface Mapping {\r\n    unixode: string;\r\n    english: string;\r\n    xharish: string;\r\n    pairs?: {\r\n        english: string;\r\n        xharish: string;\r\n    }[];\r\n}\r\n\r\nexport interface Word extends Mapping {\r\n}\r\n\r\nexport function loadUnixode(document: string) {\r\n\r\n    let parts = document.split('### WORDS:');\r\n    let mappings: Mapping[] = parts[0].split('\\n').filter(x => x.trim().length > 0).map(x => {\r\n\r\n        let partsA = x.split(':');\r\n        let partsB = partsA[1].split('=');\r\n\r\n        let unixode = partsA[0];\r\n        let english = partsB[0];\r\n        let xharish = partsB[1];\r\n\r\n        return {\r\n            unixode: unixode,\r\n            english: english,\r\n            xharish: xharish,\r\n        };\r\n    });\r\n\r\n    let lookup: { [key: string]: Mapping } = {};\r\n\r\n    mappings.forEach(x2 => lookup[x2.unixode] = x2);\r\n\r\n    let words: Word[] = parts[1].split('\\n').filter(x => x.trim().length > 0).map(x => {\r\n\r\n        let lookups = x.split('').filter(x2 => x2.trim().length > 0).map(x2 => lookup[x2]);\r\n\r\n        return {\r\n            unixode: x,\r\n            pairs: x.split('').map(x2 => ({\r\n                english: lookup[x2] ? lookup[x2].english : '',\r\n                xharish: lookup[x2] ? lookup[x2].xharish : ''\r\n            })).filter(x2 => x2.english !== '' || x2.xharish !== ''),\r\n            english: lookups.map(x2 => x2.english).join(''),\r\n            xharish: lookups.map(x2 => x2.xharish).join(''),\r\n        };\r\n    });\r\n\r\n    return {\r\n        mappings: mappings,\r\n        words: words\r\n    };\r\n}\n\n\n// WEBPACK FOOTER //\n// ./test-web/unixode-loader.ts"],"sourceRoot":""}